<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Novacool RAG Uploader</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { color: #0066cc; }
    .section { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
    button { padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #004999; }
    #log { background: #111; color: #0f0; padding: 10px; height: 200px; overflow-y: scroll; font-size: 14px; }
</style>
</head>

<body>

<h1>ðŸ“‚ Novacool RAG â€” File Upload & Reindex</h1>

<div class="section">
    <h2>Upload Files</h2>
    <input type="file" id="fileInput" multiple>
    <button onclick="uploadFiles()">Upload Files</button>
    <p id="uploadStatus"></p>
</div>

<div class="section">
    <h2>Reindex Database</h2>
    <button onclick="reindex()">Reindex Now</button>
    <p id="reindexStatus"></p>
</div>

<div class="section">
    <h2>Logs</h2>
    <pre id="log">Waiting...</pre>
</div>

<script>
async function uploadFiles() {
    const files = document.getElementById("fileInput").files;
    if (!files.length) return alert("No files selected");

    let formData = new FormData();
    for (let f of files) formData.append("files", f);

    let res = await fetch("/upload", { method: "POST", body: formData });
    let data = await res.json();

    document.getElementById("uploadStatus").innerText =
        "Uploaded: " + JSON.stringify(data.saved);
}

async function reindex() {
    document.getElementById("log").innerText = "Reindexing...";

    let res = await fetch("/reindex", { method: "POST" });
    let data = await res.json();

    document.getElementById("reindexStatus").innerText =
        JSON.stringify(data, null, 2);

    document.getElementById("log").innerText =
        "Reindex complete: " + JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
