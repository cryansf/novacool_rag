<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Novacool Chat</title>
<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #0b0e13;
    color: #fff;
  }
  #chat-box {
    height: calc(100vh - 70px);
    overflow-y: auto;
    padding: 1rem;
  }
  .msg {
    margin-bottom: 1rem;
    line-height: 1.45;
    white-space: pre-wrap;
  }
  .user { color: #4da6ff; }
  .bot { color: #ffb14d; }
  #input-area {
    position: fixed;
    bottom: 0;
    left: 0; right: 0;
    padding: .75rem;
    background: #11141a;
    border-top: 1px solid rgba(255,255,255,.08);
    display: flex;
    gap: .5rem;
  }
  #ask {
    flex: 1;
    padding: .6rem .8rem;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
  }
  #send {
    padding: .6rem 1rem;
    border: none;
    border-radius: 6px;
    background: #ff4929;
    color: #fff;
    cursor: pointer;
    font-weight: 600;
  }
</style>
</head>
<body>
  <div id="chat-box"></div>

  <div id="input-area">
    <input id="ask" type="text" placeholder="Ask Novacool AI..." autocomplete="off"/>
    <button id="send">Send</button>
  </div>

<script>
const box = document.getElementById("chat-box");
const ask = document.getElementById("ask");
const send = document.getElementById("send");

function add(role, text) {
  const div = document.createElement("div");
  div.classList.add("msg", role);
  div.textContent = text;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

async function chat() {
  const q = ask.value.trim();
  if (!q) return;
  ask.value = "";
  add("user", q);
  try {
    const r = await fetch("/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ query: q }),
    });
    const d = await r.json();
    add("bot", d.answer || "⚠️ No response");
  } catch (e) {
    add("bot", "⚠️ Server unreachable");
  }
}

send.onclick = chat;
ask.addEventListener("keydown", e => { if (e.key === "Enter") chat(); });
</script>
</body>
</html>
