<!DOCTYPE html>
<html>
<head>
  <title>Novacool Uploader</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; padding: 20px; }
    h1 { color:#7a0000; }
    #status { margin-top: 20px; white-space: pre-wrap; }
    .btn { background:#7a0000; padding:10px; color:#fff; border:none; cursor:pointer; }
  </style>
</head>
<body>
  <h1>ðŸ“‚ Novacool File Uploader</h1>

  <input id="file-input" type="file" multiple>
  <button class="btn" onclick="upload()">Upload</button>

  <br><br>
  <button class="btn" onclick="reindex()">Reindex Knowledge Base</button>

  <h2>Uploaded Files</h2>
  <pre id="files"></pre>

  <div id="status"></div>

  <script>
    async function refreshFiles() {
      const r = await fetch("/files");
      const json = await r.json();
      document.getElementById("files").textContent =
        json.files.length ? json.files.join("\n") : "None yet";
    }

    async function upload() {
      const files = document.getElementById("file-input").files;
      if (!files.length) return alert("Choose files first");

      const fd = new FormData();
      for (let f of files) fd.append("files", f);

      const r = await fetch("/upload", { method: "POST", body: fd });
      document.getElementById("status").textContent = (await r.json()).message;
      refreshFiles();
    }

    async function reindex() {
      const r = await fetch("/reindex", { method: "POST" });
      document.getElementById("status").textContent = (await r.json()).message;
    }

    refreshFiles();
  </script>
</body>
</html>
