<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Novacool Uploader</title>
  <link rel="stylesheet" href="widget.css">
  <style>
    body { font-family: system-ui; padding: 30px; background: #f2f5f9; }
    h2 { margin-bottom: 16px; }
    #log { margin-top: 16px; white-space: pre-wrap; background: #fff; padding: 14px; border-radius: 8px; }
  </style>
</head>
<body>
  <h2>üìÑ Upload Novacool Documents</h2>
  <input type="file" id="fileInput" multiple>
  <button onclick="upload()">Upload</button>

  <h2>üîÅ Reindex</h2>
  <button onclick="reindex()">Reindex All</button>

  <div id="log"></div>

  <script>
    async function upload() {
      const files = document.getElementById("fileInput").files;
      const formData = new FormData();
      for (const f of files) formData.append("files", f);
      const r = await fetch("/upload", { method: "POST", body: formData });
      document.getElementById("log").textContent = JSON.stringify(await r.json(), null, 2);
    }
    async function reindex() {
      const r = await fetch("/reindex", { method: "POST" });
      document.getElementById("log").textContent = JSON.stringify(await r.json(), null, 2);
    }
  </script>
</body>
</html>
